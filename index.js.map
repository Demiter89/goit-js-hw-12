{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n            <article class=\"card\">\n            <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\" target=\"_blank\" rel=\"noopener noreferrer\">\n              <img class=\"gallery-img\" src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" />\n            </a>\n            <div class=\"gallery-container\">\n              <div class=\"gallery-item\">\n                <p class=\"gallery-title\">Likes</p>\n                <p class=\"gallery-count\">${imgInfo.likes}</p>\n              </div>\n              <div class=\"gallery-item\">\n                <p class=\"gallery-title\">Views</p>\n                <p class=\"gallery-count\">${imgInfo.views}</p>\n              </div>\n              <div class=\"gallery-item\">\n                <p class=\"gallery-title\">Comments</p>\n                <p class=\"gallery-count\">${imgInfo.comments}</p>\n              </div>\n              <div class=\"gallery-item\">\n                <p class=\"gallery-title\">Downloads</p>\n                <p class=\"gallery-count\">${imgInfo.downloads}</p>\n              </div>\n            </div>\n          </article>\n        </li>`;\n};","import axios from 'axios';\n\nconst API_KEY = '48302309-d155748c9a8bdc74060d05abe'; \nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const { data } = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        page,\n        per_page: 15,\n      },\n    });\n    return data;\n  } catch (error) {\n    console.error('Error fetching data:', error.message);\n    throw error;\n  }\n}","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { createGalleryCardTemplate } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1; // Змінна для номера сторінки\nlet currentQuery = ''; // Змінна для збереження запиту\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  currentQuery = event.currentTarget.elements.user_query.value.trim(); // Зберігаємо запит\n  if (!currentQuery) {\n    iziToast.error({ message: 'Please enter your request', position: 'topRight' });\n    resetGallery();\n    return;\n  }\n\n  resetSearch(); // Очищуємо галерею та скидаємо налаштування\n  await loadImages(); // Завантажуємо першу сторінку\n};\n\nconst loadImages = async () => {\n  loader.classList.remove('hidden'); // Показуємо індикатор завантаження\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage); // Запит до API\n\n    if (data.total === 0) {\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query!',\n        position: 'topRight',\n      });\n      resetGallery();\n      return;\n    }\n\n    const galleryTemplate = data.hits.map(el => createGalleryCardTemplate(el)).join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryTemplate); // Додаємо нові елементи до галереї\n\n    const gallery = new SimpleLightbox('.js-gallery a', {\n      captionDelay: 300,\n      captionsData: 'alt',\n    });\n    gallery.refresh();\n\n    toggleLoadMoreButton(data.totalHits); // Оновлюємо стан кнопки Load More\n\n    loader.classList.add('hidden'); // Ховаємо індикатор завантаження\n  } catch (err) {\n    console.error(err);\n    iziToast.error({ message: 'An error occurred. Please try again!', position: 'topRight' });\n  }\n};\n\nconst resetSearch = () => {\n  currentPage = 1; // Скидаємо номер сторінки\n  resetGallery(); // Очищуємо галерею\n};\n\nconst resetGallery = () => {\n  galleryEl.innerHTML = ''; // Очищуємо галерею\n  loadMoreBtn.classList.add('hidden'); // Ховаємо кнопку Load more\n};\n\nconst toggleLoadMoreButton = totalHits => {\n  const totalPages = Math.ceil(totalHits / 15); // Загальна кількість сторінок\n  if (galleryEl.children.length === 0 || currentPage >= totalPages) {\n    loadMoreBtn.classList.add('hidden');\n    if (currentPage >= totalPages && currentPage > 1) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } else {\n    loadMoreBtn.classList.remove('hidden');\n  }\n};\n\nconst onLoadMoreClick = async () => {\n  currentPage += 1; // Збільшуємо номер сторінки\n  await loadImages(); // Завантажуємо нову сторінку\n  smoothScroll(); // Плавно прокручуємо сторінку\n};\n\nconst smoothScroll = () => {\n  const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["createGalleryCardTemplate","imgInfo","API_KEY","BASE_URL","fetchImages","query","page","data","axios","error","searchFormEl","galleryEl","loader","loadMoreBtn","currentPage","currentQuery","onSearchFormSubmit","event","iziToast","resetGallery","resetSearch","loadImages","galleryTemplate","el","SimpleLightbox","toggleLoadMoreButton","err","totalHits","totalPages","onLoadMoreClick","smoothScroll","cardHeight"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA;AAAA,4CAEmCA,EAAQ,aAAa;AAAA,8CACnBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,2CAK7CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,2CAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,2CAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA;AAAA,eCnBtDC,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,KAAAC,EACA,SAAU,EACX,CACP,CAAK,EACD,OAAOC,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,EAAM,OAAO,EAC7CA,CACP,CACH,CCdA,MAAMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAqB,MAAMC,GAAS,CAIxC,GAHAA,EAAM,eAAc,EAEpBF,EAAeE,EAAM,cAAc,SAAS,WAAW,MAAM,OACzD,CAACF,EAAc,CACjBG,EAAS,MAAM,CAAE,QAAS,4BAA6B,SAAU,UAAU,CAAE,EAC7EC,IACA,MACD,CAEDC,IACA,MAAMC,EAAU,CAClB,EAEMA,EAAa,SAAY,CAC7BT,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAML,EAAO,MAAMH,EAAYW,EAAcD,CAAW,EAExD,GAAIP,EAAK,QAAU,EAAG,CACpBW,EAAS,MAAM,CACb,QAAS,yDACT,SAAU,UAClB,CAAO,EACDC,IACA,MACD,CAED,MAAMG,EAAkBf,EAAK,KAAK,IAAIgB,GAAMvB,EAA0BuB,CAAE,CAAC,EAAE,KAAK,EAAE,EAClFZ,EAAU,mBAAmB,YAAaW,CAAe,EAEzC,IAAIE,EAAe,gBAAiB,CAClD,aAAc,IACd,aAAc,KACpB,CAAK,EACO,QAAO,EAEfC,EAAqBlB,EAAK,SAAS,EAEnCK,EAAO,UAAU,IAAI,QAAQ,CAC9B,OAAQc,EAAK,CACZ,QAAQ,MAAMA,CAAG,EACjBR,EAAS,MAAM,CAAE,QAAS,uCAAwC,SAAU,UAAU,CAAE,CACzF,CACH,EAEME,EAAc,IAAM,CACxBN,EAAc,EACdK,GACF,EAEMA,EAAe,IAAM,CACzBR,EAAU,UAAY,GACtBE,EAAY,UAAU,IAAI,QAAQ,CACpC,EAEMY,EAAuBE,GAAa,CACxC,MAAMC,EAAa,KAAK,KAAKD,EAAY,EAAE,EACvChB,EAAU,SAAS,SAAW,GAAKG,GAAec,GACpDf,EAAY,UAAU,IAAI,QAAQ,EAC9BC,GAAec,GAAcd,EAAc,GAC7CI,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,GAGHL,EAAY,UAAU,OAAO,QAAQ,CAEzC,EAEMgB,EAAkB,SAAY,CAClCf,GAAe,EACf,MAAMO,EAAU,EAChBS,GACF,EAEMA,EAAe,IAAM,CACzB,KAAM,CAAE,OAAQC,CAAU,EAAKpB,EAAU,kBAAkB,wBAC3D,OAAO,SAAS,CACd,IAAKoB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,EAEArB,EAAa,iBAAiB,SAAUM,CAAkB,EAC1DH,EAAY,iBAAiB,QAASgB,CAAe"}